<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>Syllabus Template Slides</title>
    <link rel="stylesheet" href="./../css/reveal.css" />
    <link rel="stylesheet" href="./../css/theme/black.css" id="theme" />
    <link rel="stylesheet" href="./../css/highlight/zenburn.css" />
    <link rel="stylesheet" href="./../css/print/paper.css" type="text/css" media="print" />
    <link rel="stylesheet" href="./../assets/Reveal/makeschool.css" />

    <script>
      document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>');
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides"><section  data-markdown><script type="text/template"><!-- Run this slideshow via the following command: -->
<!-- reveal-md README.md -w -->


<!-- .slide: class="header" -->

# Combine

## [Slides](https://make-school-courses.github.io/MOB-2.4-Advanced-Architectural-Patterns-in-iOS/Slides/Combine-Pt.3/README.html ':ignore')
</script></section><section  data-markdown><script type="text/template">
## Learning Objectives

By the end of this lesson, you will be able to:

**Implement**:
- Combine to update UI with UIKit
- Combine to fetch and display data
</script></section><section ><section data-markdown><script type="text/template">
## @Published

A type that publishes a property marked with an attribute.

```swift
@propertyWrapper struct Published<Value>
```
- Publishing a property with the `@Published` attribute creates a publisher of this type.
- You access the publisher with the $ operator
- Class constrained

[Docs](https://developer.apple.com/documentation/combine/published)
</script></section><section data-markdown><script type="text/template">
```swift
class Weather {
    @Published var temperature: Double
    init(temperature: Double) {
        self.temperature = temperature
    }
}

let weather = Weather(temperature: 20)
cancellable = weather.$temperature
    .sink() {
        print ("Temperature now: \($0)")
}
weather.temperature = 25
```
</script></section><section data-markdown><script type="text/template">
## Integration with UIKIt

Declarative UI updates from user input.

[Instructions](https://github.com/Make-School-Courses/MOB-2.4-Advanced-Architectural-Patterns-in-iOS/blob/master/Lessons/Combine-Pt.3/assignments/Example-1.md)
</script></section></section><section  data-markdown><script type="text/template">
## Networking

**URLSession** has a Combine publisher: `dataTaskPublisher`

The result is a tuple `(Data, URLResponse)`

And there's also support with **Codable** by using the operator `decode(type:decoder:)`

[Playground Sample Code](https://github.com/Make-School-Courses/MOB-2.4-Advanced-Architectural-Patterns-in-iOS/blob/master/Lessons/Combine-Pt.3/assignments/Networking.playground.zip)

<aside class="notes">
When using this combination, we need to first use map on the result from dataTaskPublisher, to just get the Data part of it from the tuple. Then we can apply the operator to decode it.
</aside>
</script></section><section ><section data-markdown><script type="text/template">
## Integration with Networking

Fetching, transforming and displaying data.

[Sample Project](https://github.com/Make-School-Labs/MOB2.4-CombineEx2)
</script></section><section data-markdown><script type="text/template">
### Activity

Analize the sample project and observe how Combine is used to fetch and display data.

Make sure you identify and understand these concepts:
- eraseToAnyPublisher
- tryMap
- replaceError
- @Published variables
- throttle
- switchToLatest
</script></section></section><section  data-markdown><script type="text/template">
## After Class

Combine is a new framework and it will take more reading and practice to get used to it. But you can start using what you already know, little by little. ðŸ˜‰
</script></section><section  data-markdown><script type="text/template">
## Additional Resources

- [Using Combine](https://heckj.github.io/swiftui-notes/#coreconcepts-publisher-subscriber)
- [Combine Concepts - Playground](https://github.com/AvdLee/CombineSwiftPlayground)
- [URLSession + Combine](https://theswiftdev.com/urlsession-and-the-combine-framework/)
- [Networking Layer with Combine](https://betterprogramming.pub/implement-a-networking-layer-using-combine-in-swift-5-8a83e3ac9bae)
- [More Networking with Combine](https://www.vadimbulavin.com/modern-networking-in-swift-5-with-urlsession-combine-framework-and-codable/)
- [Combine + UI Updates](https://useyourloaf.com/blog/getting-started-with-combine/)
- Book: Practical Combine by Donny Walls
- Book: Combine - Asynchronous programming with Swift By Shai Mishali, Marin Todorov, Florent Pillet and Scott Gardner
</script></section></div>
    </div>

    <script src="./../js/reveal.js"></script>

    <script>
      function extend() {
        var target = {};
        for (var i = 0; i < arguments.length; i++) {
          var source = arguments[i];
          for (var key in source) {
            if (source.hasOwnProperty(key)) {
              target[key] = source[key];
            }
          }
        }
        return target;
      }

      // Optional libraries used to extend on reveal.js
      var deps = [
        { src: './../plugin/markdown/marked.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './../plugin/markdown/markdown.js', condition: function() { return !!document.querySelector('[data-markdown]'); } },
        { src: './../plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: './../plugin/zoom-js/zoom.js', async: true },
        { src: './../plugin/notes/notes.js', async: true },
        { src: './../plugin/math/math.js', async: true }
      ];

      // default options to init reveal.js
      var defaultOptions = {
        controls: true,
        progress: true,
        history: true,
        center: true,
        transition: 'default', // none/fade/slide/convex/concave/zoom
        dependencies: deps
      };

      // options from URL query string
      var queryOptions = Reveal.getQueryHash() || {};

      var options = extend(defaultOptions, {"controls":true,"progress":true,"autoPlayMedia":false,"slideNumber":"c/t","showSlideNumber":"all","controlsTutorial":true,"controlsLayout":"edges","transition":"slide","transitionSpeed":"medium","minScale":0.5,"maxScale":3}, queryOptions);
    </script>


    <script>
      Reveal.initialize(options);
    </script>
  </body>
</html>
